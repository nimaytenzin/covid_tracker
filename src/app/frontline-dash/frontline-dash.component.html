<!-- <div  id="totalTestTable">
  <form [formGroup]="searchForm" class="search__form">
      <mat-form-field  class="search__form_field" appearance="outline" style="width: 50%;">
          <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>

    </form>

</div>  -->

<mat-tab-group>
  <mat-tab label="Sort by Work Place">
   <div style="display: flex; flex-direction: row;">
    <div style="float: left; width: 50%;">
      <form [formGroup]="filterDataForm" style="width: 80%;">
        <mat-form-field class="justifier">
          <mat-label>Dzongkhag/Thromde</mat-label>
          <mat-select name="workDzongkhag"  formControlName="workDzongkhagControl" (selectionChange)="getZones($event.value)">
            <mat-option *ngFor="let dzongkhag of dzongkhags" [value]="dzongkhag.id" >
              {{dzongkhag.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field class="justifier" >
          <mat-label>Zone/Gewog</mat-label>
          <mat-select name="zone"  formControlName="zoneControl">
            <mat-option *ngFor="let zone of zones" [value]="zone.id" >
              {{zone.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </form>
      <button mat-flat-button color="primary"  (click) ="sortByDzongkhag()">Get Data</button>
    </div>

    <div style="float: right; width: 50%; margin-top: 1rem;">
      <!-- <p>Dzongkhag: {{dzongkhagName}}</p> -->
      <p>Total Number: {{totalCount}}</p>
      <p>Total Male: {{totalMale}}</p>
      <p>Total Female: {{totalFemale}}</p>
    </div>
   </div>
    
   
  </mat-tab>


  <button mat-button (click)="exportToExcel()"> <mat-icon>download</mat-icon> Download as xlsx</button>
  <mat-tab label="Sort by Work Agency">
    <div style="display: flex; flex-direction: row;">
      <div style="float: left; width: 50%;">
        <form [formGroup]="filterDataForm" style="width: 80%;">
          <mat-form-field class="justifier">
            <mat-label>Agency</mat-label>
            <mat-select name="agencyCategory" formControlName= "agencyCategoryControl"  (selectionChange)="getAgencies($event.value)">
              <mat-option *ngFor="let agencyCategory of agencyCategories" [value]="agencyCategory.id"  >
                {{agencyCategory.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          
          <mat-form-field class="justifier">
            <mat-label>Sub Agency</mat-label>
            <mat-select name="agency" formControlName= "agencyControl"  >
              <mat-option *ngFor="let agency of agencies" [value]="agency.id">
                {{agency.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
    
          </form>
          <button mat-flat-button color="primary" (click) ="sortByAgency()">Get Data</button>
      </div>

      <div style="float: right; width: 50%; margin-top: 1rem;">
        <p>Total Number: {{totalCount}}</p>
        <p>Total Male: {{totalMale}}</p>
        <p>Total Female: {{totalFemale}}</p>
      </div>
    </div>
  
   </mat-tab>
</mat-tab-group>





<table #testTable mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" *ngIf="showTable">

  <!-- Position Column -->
  <ng-container matColumnDef="slNo">
    <th mat-header-cell *matHeaderCellDef >Sl-No </th>
    <td mat-cell *matCellDef="let subject;let i = index;"> {{i+1}} </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef  mat-sort-header> Name </th>
    <td mat-cell *matCellDef="let subject"> {{subject.name}} </td>
  </ng-container>

  <!-- Weight Column -->
  <ng-container matColumnDef="sex">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Gender </th>
    <td mat-cell *matCellDef="let subject"> {{subject.sex}} </td>
  </ng-container>

  <!-- Symbol Column -->
  <ng-container matColumnDef="age">
    <th mat-header-cell *matHeaderCellDef > Age </th>
    <td mat-cell *matCellDef="let subject"> {{subject.age}} </td>
  </ng-container>

   <ng-container matColumnDef="cid">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> CID </th>
    <td mat-cell *matCellDef="let subject"> {{subject.cid}} </td>
  </ng-container>
  <ng-container matColumnDef="contact">
  <th mat-header-cell *matHeaderCellDef mat-sort-header> Contact </th>
  <td mat-cell *matCellDef="let subject"> {{subject.contact}} </td>
  </ng-container>
       
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>